name: Release

on:
  push:
    tags:
      - "*"

permissions: {}

jobs:
  push:
    runs-on: ubuntu-latest
    permissions:
      id-token: write
    environment: rubygems.org
    steps:
      - uses: actions/checkout@v6
        with:
          # See: https://github.com/actions/checkout/issues/1467#issuecomment-2764532031
          fetch-depth: 1
          fetch-tags: true
          ref: ${{ github.ref }}

      - uses: ruby/setup-ruby@v1
        with:
          bundler-cache: true
          ruby-version: ruby

      - uses: rubygems/release-gem@1c162a739e8b4cb21a676e97b087e8268d8fc40b
